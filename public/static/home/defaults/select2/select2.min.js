(function() {
    ready(function() {
        var option_box = document.getElementsByClassName("custom-option-box")[0],
            select_box = document.getElementsByClassName("select-box")[0],
            width;
        if(option_box==null) return;
        option_box.style.display = "none"; //初始ul隐藏  


        document.getElementById("fisrt").addEventListener("click", function() {
            var isShow = this.dataset.show;
            if(isShow == 0) {
                this.dataset.show = 1;
                this.classList.add("active");
                this.nextElementSibling.style.display = "block"; //找到ul.son_ul显示  
            } else {
                this.dataset.show = 0;
                this.classList.remove("active");
                this.nextElementSibling.style.display = "none"; //找到ul.son_ul显示  
            }
        },false);
        var option = option_box.getElementsByTagName("li");
        for(var i = 0; i < option.length; i++){
            option[i].onclick = function(){
                var fisrt = this.parentNode.previousElementSibling;
                var siblings = getSiblings(this);
                fisrt.innerHTML = this.childNodes[0].innerText;
                fisrt.dataset.val = this.dataset.val;
                this.classList.add("active");
                for(var i = 0;i<siblings.length;i++){
                    siblings[i].classList.remove("active");
                }
                this.parentNode.style.display = "none";
                fisrt.dataset.show = 0;
                fisrt.classList.remove("active");
                location.href=fisrt.dataset.val;
            }
        }

    });

    function ready (fn) {
        if(document.addEventListener){        //标准浏览器
            document.addEventListener('DOMContentLoaded',function(){
                //注销时间，避免重复触发
                document.removeEventListener('DOMContentLoaded',arguments.callee,false);
                fn();        //运行函数
            },false);
        }else if(document.attachEvent){        //IE浏览器
            document.attachEvent('onreadystatechange',function(){
                if(document.readyState=='complete'){
                    document.detachEvent('onreadystatechange',arguments.callee);
                    fn();        //函数运行
                }
            });
        }
    }
    function getSiblings (elm) {
        var a = [];
        var p = elm.parentNode.children;
        for(var i = 0, pl = p.length; i < pl; i++) {
            if(p[i] !== elm) a.push(p[i]);
        }
        return a;
    }
})();